<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MathGenius Pro+ - LED Math Adventure</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Nunito:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --led-blue: #00f0fc;
            --led-pink: #ff2ced;
            --led-green: #00ff88;
            --led-yellow: #fff01f;
            --led-purple: #9d00ff;
            --led-red: #ff0055;
            --led-glow: 0 0 10px;
            --led-glow-lg: 0 0 20px;
            --led-glow-xl: 0 0 30px;
            --primary-bg: #0a0a20;
            --card-bg: #121230;
            --text-light: #ffffff;
        }
        
        body {
            margin: 0;
            padding: 0;
            font-family: 'Nunito', sans-serif;
            background-color: var(--primary-bg);
            color: var(--text-light);
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        /* LED Grid Background */
        .led-grid {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                linear-gradient(rgba(10, 10, 32, 0.9), 
                url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"><circle cx="10" cy="10" r="1" fill="%2300f0fc" opacity="0.2"/></svg>');
            background-size: 40px 40px;
            z-index: -2;
            animation: matrixScroll 100s linear infinite;
        }
        
        @keyframes matrixScroll {
            0% { background-position: 0 0; }
            100% { background-position: 100% 100%; }
        }
        
        /* LED Pulse Animation */
        @keyframes ledPulse {
            0% { box-shadow: var(--led-glow) var(--led-blue); }
            50% { box-shadow: var(--led-glow-xl) var(--led-blue); }
            100% { box-shadow: var(--led-glow) var(--led-blue); }
        }
        
        /* Main Container with LED Border */
        .math-container {
            max-width: 1100px;
            margin: 30px auto;
            padding: 30px;
            background-color: var(--card-bg);
            border: 3px solid var(--led-blue);
            border-radius: 15px;
            box-shadow: 
                var(--led-glow-lg) var(--led-blue),
                inset 0 0 20px rgba(0, 240, 252, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .math-container::before {
            content: '';
            position: absolute;
            top: -10px;
            left: -10px;
            right: -10px;
            bottom: -10px;
            border: 2px dashed var(--led-pink);
            border-radius: 20px;
            animation: borderPulse 4s linear infinite;
            pointer-events: none;
            z-index: -1;
        }
        
        @keyframes borderPulse {
            0%, 100% { opacity: 0.3; box-shadow: 0 0 10px var(--led-pink); }
            50% { opacity: 1; box-shadow: 0 0 30px var(--led-pink); }
        }
        
        /* Header with LED Title */
        .header {
            text-align: center;
            margin-bottom: 40px;
            position: relative;
        }
        
        .title {
            font-family: 'Orbitron', sans-serif;
            font-size: 3rem;
            margin: 0;
            color: var(--led-yellow);
            text-shadow: 
                var(--led-glow) var(--led-yellow),
                var(--led-glow-lg) var(--led-purple);
            letter-spacing: 3px;
            animation: titleGlow 2s ease-in-out infinite alternate;
        }
        
        @keyframes titleGlow {
            from { text-shadow: var(--led-glow) var(--led-yellow); }
            to { text-shadow: var(--led-glow-lg) var(--led-yellow), var(--led-glow-xl) var(--led-purple); }
        }
        
        /* Skill Cards with LED Effects */
        .skills-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }
        
        .skill-card {
            background: rgba(20, 20, 50, 0.7);
            border-radius: 15px;
            padding: 25px;
            border: 2px solid var(--led-blue);
            transition: all 0.3s;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            box-shadow: var(--led-glow) var(--led-blue);
        }
        
        .skill-card:hover {
            transform: translateY(-5px);
            box-shadow: 
                var(--led-glow-lg) var(--led-blue),
                var(--led-glow) var(--led-pink);
            border-color: var(--led-pink);
        }
        
        .skill-card.completed {
            border-left: 5px solid var(--led-green);
            box-shadow: var(--led-glow) var(--led-green);
        }
        
        .skill-card.in-progress {
            border-left: 5px solid var(--led-blue);
        }
        
        .skill-card.new {
            border-left: 5px solid var(--led-purple);
        }
        
        /* Progress Bars with LED Glow */
        .skill-progress {
            height: 8px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            margin-top: 20px;
            overflow: hidden;
            position: relative;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--led-blue), var(--led-green));
            width: 0%;
            transition: width 0.8s ease-out;
            box-shadow: var(--led-glow) var(--led-green);
        }
        
        /* Question Area with LED Effects */
        .question-area {
            background: rgba(0, 30, 50, 0.7);
            border: 3px solid var(--led-green);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 
                var(--led-glow) var(--led-green),
                inset 0 0 15px var(--led-green);
        }
        
        .question-text {
            font-size: 2rem;
            margin-bottom: 25px;
            text-align: center;
            text-shadow: 0 0 10px white;
        }
        
        /* Answer Options with LED Hover */
        .answer-options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .answer-option {
            background: rgba(0, 0, 0, 0.5);
            border: 2px solid var(--led-blue);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1.2rem;
            box-shadow: var(--led-glow) var(--led-blue);
        }
        
        .answer-option:hover {
            transform: translateY(-3px);
            box-shadow: var(--led-glow-lg) var(--led-blue);
            border-color: var(--led-pink);
        }
        
        .answer-option.selected {
            background: rgba(0, 240, 252, 0.2);
            box-shadow: var(--led-glow-lg) var(--led-blue);
        }
        
        .answer-option.correct {
            background: rgba(0, 255, 136, 0.2);
            border-color: var(--led-green);
            box-shadow: var(--led-glow-lg) var(--led-green);
            animation: pulseCorrect 0.5s;
        }
        
        .answer-option.incorrect {
            background: rgba(255, 0, 85, 0.2);
            border-color: var(--led-red);
            box-shadow: var(--led-glow) var(--led-red);
        }
        
        @keyframes pulseCorrect {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        /* Submit Button with LED Effects */
        .submit-btn {
            background: linear-gradient(135deg, var(--led-purple), var(--led-pink));
            color: white;
            border: none;
            padding: 16px 32px;
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 
                var(--led-glow) var(--led-purple),
                0 4px 15px rgba(157, 0, 255, 0.5);
            display: block;
            margin: 0 auto;
            position: relative;
            overflow: hidden;
        }
        
        .submit-btn:hover {
            transform: translateY(-3px);
            box-shadow: 
                var(--led-glow-lg) var(--led-pink),
                0 6px 20px rgba(255, 44, 237, 0.6);
        }
        
        .submit-btn:active {
            transform: translateY(1px);
        }
        
        .submit-btn::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(
                to bottom right,
                rgba(255, 255, 255, 0.3),
                rgba(255, 255, 255, 0)
            );
            transform: rotate(30deg);
            transition: all 0.5s;
        }
        
        .submit-btn:hover::before {
            left: 100%;
        }
        
        /* Feedback Area with LED Effects */
        .feedback-area {
            margin-top: 30px;
            padding: 20px;
            border-radius: 12px;
            display: none;
            animation: fadeIn 0.5s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .feedback-correct {
            background: rgba(0, 255, 136, 0.2);
            border: 2px solid var(--led-green);
            box-shadow: var(--led-glow) var(--led-green);
        }
        
        .feedback-incorrect {
            background: rgba(255, 0, 85, 0.2);
            border: 2px solid var(--led-red);
            box-shadow: var(--led-glow) var(--led-red);
        }
        
        /* Tutor Chat with LED Effects */
        .tutor-chat {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 350px;
            background: var(--card-bg);
            border: 2px solid var(--led-purple);
            border-radius: 15px;
            box-shadow: 
                var(--led-glow) var(--led-purple),
                0 8px 25px rgba(0, 0, 0, 0.3);
            overflow: hidden;
            z-index: 1000;
            display: none;
            transform: translateY(20px);
            opacity: 0;
            transition: all 0.3s;
        }
        
        .tutor-chat.active {
            transform: translateY(0);
            opacity: 1;
        }
        
        .tutor-header {
            background: linear-gradient(135deg, var(--led-purple), var(--led-pink));
            color: white;
            padding: 18px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
        }
        
        .tutor-messages {
            height: 300px;
            overflow-y: auto;
            padding: 20px;
            background: rgba(10, 10, 30, 0.7);
        }
        
        .message {
            margin-bottom: 15px;
            max-width: 85%;
            animation: fadeIn 0.3s;
        }
        
        .tutor-message {
            background: rgba(0, 240, 252, 0.2);
            border: 1px solid var(--led-blue);
            padding: 15px;
            border-radius: 18px 18px 18px 0;
            box-shadow: var(--led-glow) var(--led-blue);
        }
        
        .user-message {
            background: linear-gradient(135deg, var(--led-pink), var(--led-purple));
            color: white;
            padding: 15px;
            border-radius: 18px 18px 0 18px;
            margin-left: auto;
            box-shadow: var(--led-glow) var(--led-purple);
        }
        
        .tutor-input {
            display: flex;
            padding: 15px;
            border-top: 1px solid var(--led-purple);
            background: var(--card-bg);
        }
        
        .tutor-input-field {
            flex: 1;
            padding: 12px 15px;
            border: 2px solid var(--led-blue);
            border-radius: 24px;
            margin-right: 12px;
            background: rgba(0, 0, 0, 0.5);
            color: white;
            font-family: 'Nunito', sans-serif;
            box-shadow: var(--led-glow) var(--led-blue);
            transition: all 0.3s;
        }
        
        .tutor-input-field:focus {
            outline: none;
            border-color: var(--led-pink);
            box-shadow: var(--led-glow-lg) var(--led-pink);
        }
        
        .tutor-send-btn {
            background: linear-gradient(135deg, var(--led-blue), var(--led-green));
            color: white;
            border: none;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: var(--led-glow) var(--led-blue);
            transition: all 0.3s;
        }
        
        .tutor-send-btn:hover {
            transform: scale(1.1);
            box-shadow: var(--led-glow-lg) var(--led-green);
        }
        
        /* Help Button with LED Effects */
        .help-btn {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: linear-gradient(135deg, var(--led-red), #ff2ced);
            color: white;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 900;
            box-shadow: 
                var(--led-glow) var(--led-red),
                0 6px 15px rgba(255, 0, 85, 0.4);
            transition: all 0.3s;
            font-size: 1.5rem;
        }
        
        .help-btn:hover {
            transform: scale(1.1) rotate(10deg);
            box-shadow: 
                var(--led-glow-lg) var(--led-pink),
                0 8px 20px rgba(255, 44, 237, 0.6);
        }
        
        /* Celebration Effects */
        .celebration {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 2000;
            display: none;
        }
        
        .confetti {
            position: absolute;
            width: 15px;
            height: 15px;
            opacity: 0;
            animation: confettiFall 5s linear forwards;
        }
        
        @keyframes confettiFall {
            0% { 
                transform: translateY(-100px) rotate(0deg); 
                opacity: 1;
            }
            100% { 
                transform: translateY(100vh) rotate(720deg); 
                opacity: 0;
            }
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .math-container {
                margin: 15px;
                padding: 20px;
            }
            
            .title {
                font-size: 2rem;
            }
            
            .skills-grid {
                grid-template-columns: 1fr;
            }
            
            .answer-options {
                grid-template-columns: 1fr;
            }
            
            .tutor-chat {
                width: calc(100% - 40px);
                right: 20px;
                left: 20px;
            }
            
            .help-btn {
                bottom: 20px;
                right: 20px;
                width: 50px;
                height: 50px;
                font-size: 1.2rem;
            }
        }
    </style>
</head>
<body>
    <!-- LED Grid Background -->
    <div class="led-grid"></div>
    
    <!-- Main Container -->
    <div class="math-container">
        <div class="header">
            <h1 class="title">MATHGENIUS PRO+</h1>
            <p class="subtitle" style="color: var(--led-blue); text-shadow: var(--led-glow) var(--led-blue);">
                Master Math with LED-Powered Learning!
            </p>
        </div>
        
        <!-- Skills Grid -->
        <div class="skills-grid">
            <div class="skill-card completed">
                <h3><i class="fas fa-plus" style="color: var(--led-green);"></i> Adding Integers</h3>
                <p>Mastered adding positive and negative numbers</p>
                <div class="skill-progress">
                    <div class="progress-fill" style="width: 100%"></div>
                </div>
            </div>
            
            <div class="skill-card completed">
                <h3><i class="fas fa-minus" style="color: var(--led-green);"></i> Subtracting Integers</h3>
                <p>Confidently subtract integers of any sign</p>
                <div class="skill-progress">
                    <div class="progress-fill" style="width: 100%"></div>
                </div>
            </div>
            
            <div class="skill-card in-progress">
                <h3><i class="fas fa-times" style="color: var(--led-blue);"></i> Multiplying Decimals</h3>
                <p>Working on decimal placement in products</p>
                <div class="skill-progress">
                    <div class="progress-fill" style="width: 80%"></div>
                </div>
            </div>
            
            <div class="skill-card new">
                <h3><i class="fas fa-divide" style="color: var(--led-purple);"></i> Dividing Fractions</h3>
                <p>Learn to multiply by reciprocals</p>
                <div class="skill-progress">
                    <div class="progress-fill" style="width: 15%"></div>
                </div>
            </div>
        </div>
        
        <!-- Question Area -->
        <div class="question-area">
            <div class="current-skill" style="color: var(--led-blue); text-shadow: var(--led-glow) var(--led-blue);">
                <i class="fas fa-times"></i> Multiplying Decimals
            </div>
            <div class="question-counter" style="color: var(--led-pink);">
                Question 12 of 15
            </div>
            
            <div class="question-text">What is 3.5 Ã— 2.4?</div>
            
            <div class="answer-options">
                <div class="answer-option">7.0</div>
                <div class="answer-option">8.4</div>
                <div class="answer-option">6.9</div>
                <div class="answer-option">8.0</div>
            </div>
            
            <button class="submit-btn">
                <i class="fas fa-paper-plane"></i> Submit Answer
            </button>
            
            <div class="feedback-area feedback-correct">
                <h3 style="color: var(--led-green); text-shadow: var(--led-glow) var(--led-green);">
                    <i class="fas fa-check-circle"></i> Correct!
                </h3>
                <p>Great job! 3.5 Ã— 2.4 = 8.4. Remember to count the decimal places in both numbers.</p>
            </div>
            
            <div class="feedback-area feedback-incorrect">
                <h3 style="color: var(--led-red); text-shadow: var(--led-glow) var(--led-red);">
                    <i class="fas fa-times-circle"></i> Not Quite Right
                </h3>
                <p>The correct answer is 8.4. When multiplying decimals, count the total decimal places in both numbers.</p>
            </div>
        </div>
    </div>
    
    <!-- Tutor Chat -->
    <div class="tutor-chat" id="tutorChat">
        <div class="tutor-header" id="tutorHeader">
            <div>
                <i class="fas fa-robot"></i> Math Tutor
            </div>
            <div>
                <span style="color: var(--led-green); text-shadow: var(--led-glow) var(--led-green);">Online</span>
            </div>
        </div>
        <div class="tutor-messages" id="tutorMessages">
            <div class="message tutor-message">
                Hi there! I'm your LED-powered math tutor. How can I help you today?
            </div>
            <div class="message tutor-message">
                Try solving the current problem, and I'll give you glowing feedback!
            </div>
        </div>
        <div class="tutor-input">
            <input type="text" class="tutor-input-field" placeholder="Type your question..." id="tutorInput">
            <button class="tutor-send-btn" id="tutorSend">
                <i class="fas fa-paper-plane"></i>
            </button>
        </div>
    </div>
    
    <!-- Help Button -->
    <div class="help-btn" id="helpBtn">
        <i class="fas fa-question"></i>
    </div>
    
    <!-- Celebration Effect -->
    <div class="celebration" id="celebration"></div>
    
    <script>
        // ======================
        // LED MATH TUTOR ENGINE
        // ======================
        
        // Question Database
        const questions = {
            "Multiplying Decimals": [
                {
                    question: "What is 2.3 Ã— 4?",
                    options: ["8.12", "9.2", "8.3", "9.12"],
                    answer: 1,
                    explanation: "Multiply 23 Ã— 4 = 92, then place the decimal point one place from the right: 9.2"
                },
                {
                    question: "Calculate 1.5 Ã— 0.6",
                    options: ["0.9", "0.09", "9.0", "0.009"],
                    answer: 0,
                    explanation: "Multiply 15 Ã— 6 = 90. There are 2 decimal places total (1 in 1.5 and 1 in 0.6), so 0.90 = 0.9"
                },
                {
                    question: "What is 3.5 Ã— 2.4?",
                    options: ["7.0", "8.4", "6.9", "8.0"],
                    answer: 1,
                    explanation: "Multiply 35 Ã— 24 = 840. There are 2 decimal places total, so 8.40 = 8.4"
                }
            ]
        };
        
        // Tutor Responses
        const tutorResponses = {
            greetings: [
                "Hello! I'm your LED-powered math tutor! âœ¨",
                "Hi there! Ready for some glowing math practice? ðŸŒŸ",
                "Welcome! Let's light up your math skills! ðŸ’¡"
            ],
            help: [
                "I can explain math concepts with colorful examples!",
                "Need help? I'll make math shine for you!",
                "What part has you stuck? I'll brighten the way!"
            ],
            correct: [
                "ðŸŒŸ Brilliant! Your answer is shining bright!",
                "âœ¨ Correct! You're lighting up the math world!",
                "ðŸ’¡ Perfect! Your math skills are glowing!"
            ],
            incorrect: [
                "ðŸ’¡ Almost! Let me brighten your understanding...",
                "ðŸ”¦ Not quite, but we'll light the way to the right answer!",
                "âœ¨ Oops! Here's a lightbulb moment to help..."
            ]
        };
        
        // DOM Elements
        const helpBtn = document.getElementById('helpBtn');
        const tutorChat = document.getElementById('tutorChat');
        const tutorHeader = document.getElementById('tutorHeader');
        const tutorMessages = document.getElementById('tutorMessages');
        const tutorInput = document.getElementById('tutorInput');
        const tutorSend = document.getElementById('tutorSend');
        const answerOptions = document.querySelectorAll('.answer-option');
        const submitBtn = document.querySelector('.submit-btn');
        const feedbackCorrect = document.querySelector('.feedback-correct');
        const feedbackIncorrect = document.querySelector('.feedback-incorrect');
        const celebration = document.getElementById('celebration');
        
        // Current State
        let currentSkill = "Multiplying Decimals";
        let currentQuestion = 0;
        let score = 0;
        
        // Initialize
        loadQuestion();
        addTutorMessage(getRandomResponse(tutorResponses.greetings));
        
        // Event Listeners
        helpBtn.addEventListener('click', toggleTutorChat);
        tutorHeader.addEventListener('click', toggleTutorChat);
        tutorSend.addEventListener('click', sendTutorMessage);
        tutorInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') sendTutorMessage();
        });
        
        answerOptions.forEach(option => {
            option.addEventListener('click', function() {
                answerOptions.forEach(opt => opt.classList.remove('selected'));
                this.classList.add('selected');
            });
        });
        
        submitBtn.addEventListener('click', checkAnswer);
        
        // Functions
        function toggleTutorChat() {
            tutorChat.classList.toggle('active');
            if (tutorChat.classList.contains('active')) {
                tutorInput.focus();
            }
        }
        
        function sendTutorMessage() {
            const message = tutorInput.value.trim();
            if (message === '') return;
            
            // Add user message
            addUserMessage(message);
            tutorInput.value = '';
            
            // Show typing indicator
            const typingIndicator = document.createElement('div');
            typingIndicator.className = 'message tutor-message';
            typingIndicator.innerHTML = `
                <div style="display: flex; gap: 5px;">
                    <div style="width: 8px; height: 8px; background-color: var(--led-blue); border-radius: 50%; animation: blink 1s infinite;"></div>
                    <div style="width: 8px; height: 8px; background-color: var(--led-blue); border-radius: 50%; animation: blink 1s infinite 0.2s;"></div>
                    <div style="width: 8px; height: 8px; background-color: var(--led-blue); border-radius: 50%; animation: blink 1s infinite 0.4s;"></div>
                </div>
            `;
            tutorMessages.appendChild(typingIndicator);
            tutorMessages.scrollTop = tutorMessages.scrollHeight;
            
            // Process and respond
            setTimeout(() => {
                // Remove typing indicator
                if (typingIndicator.parentNode) {
                    typingIndicator.parentNode.removeChild(typingIndicator);
                }
                
                const lowerMsg = message.toLowerCase();
                let response = "";
                
                if (lowerMsg.includes("hello") || lowerMsg.includes("hi")) {
                    response = getRandomResponse(tutorResponses.greetings);
                }
                else if (lowerMsg.includes("help")) {
                    response = getRandomResponse(tutorResponses.help);
                }
                else if (lowerMsg.includes("multipl") || lowerMsg.includes("decimal")) {
                    response = "To multiply decimals:\n1) Multiply as whole numbers\n2) Count total decimal places\n3) Place decimal in answer\n\nExample: 1.5 Ã— 0.6 = 0.9";
                }
                else if (lowerMsg.includes("explain")) {
                    response = questions[currentSkill][currentQuestion].explanation;
                }
                else {
                    response = "I'm your LED math tutor! Try asking:\n- How to multiply decimals\n- Explain this problem\n- Or any math question!";
                }
                
                addTutorMessage(response);
            }, 1000 + Math.random() * 1000);
        }
        
        function addTutorMessage(text) {
            const msgDiv = document.createElement('div');
            msgDiv.className = 'message tutor-message';
            msgDiv.textContent = text;
            tutorMessages.appendChild(msgDiv);
            tutorMessages.scrollTop = tutorMessages.scrollHeight;
        }
        
        function addUserMessage(text) {
            const msgDiv = document.createElement('div');
            msgDiv.className = 'message user-message';
            msgDiv.textContent = text;
            tutorMessages.appendChild(msgDiv);
            tutorMessages.scrollTop = tutorMessages.scrollHeight;
        }
        
        function getRandomResponse(responses) {
            return responses[Math.floor(Math.random() * responses.length)];
        }
        
        function checkAnswer() {
            const selectedOption = document.querySelector('.answer-option.selected');
            if (!selectedOption) {
                addTutorMessage("Please select an answer first!");
                return;
            }
            
            const selectedIndex = Array.from(answerOptions).indexOf(selectedOption);
            const correctIndex = questions[currentSkill][currentQuestion].answer;
            
            if (selectedIndex === correctIndex) {
                // Correct answer
                score++;
                feedbackCorrect.style.display = 'block';
                feedbackIncorrect.style.display = 'none';
                
                answerOptions.forEach(opt => {
                    opt.classList.remove('selected', 'incorrect');
                    if (Array.from(answerOptions).indexOf(opt) === correctIndex) {
                        opt.classList.add('correct');
                    }
                });
                
                // Add celebration
                createCelebration();
                
                // Add congratulatory message
                addTutorMessage(getRandomResponse(tutorResponses.correct));
                
                // Move to next question after delay
                setTimeout(() => {
                    currentQuestion = (currentQuestion + 1) % questions[currentSkill].length;
                    loadQuestion();
                }, 2000);
            } else {
                // Incorrect answer
                feedbackCorrect.style.display = 'none';
                feedbackIncorrect.style.display = 'block';
                
                selectedOption.classList.add('incorrect');
                answerOptions[correctIndex].classList.add('correct');
                
                // Add helpful message
                addTutorMessage(getRandomResponse(tutorResponses.incorrect) + " " + 
                    questions[currentSkill][currentQuestion].explanation);
            }
        }
        
        function loadQuestion() {
            const question = questions[currentSkill][currentQuestion];
            document.querySelector('.question-text').textContent = question.question;
            
            answerOptions.forEach((option, index) => {
                option.textContent = question.options[index];
                option.classList.remove('selected', 'correct', 'incorrect');
            });
            
            feedbackCorrect.style.display = 'none';
            feedbackIncorrect.style.display = 'none';
        }
        
        function createCelebration() {
            celebration.innerHTML = '';
            celebration.style.display = 'block';
            
            const colors = [var(--led-blue), var(--led-pink), var(--led-green), var(--led-yellow), var(--led-purple)];
            const shapes = ['circle', 'square', 'triangle'];
            
            for (let i = 0; i < 50; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                
                // Random properties
                const size = Math.random() * 15 + 5;
                const color = colors[Math.floor(Math.random() * colors.length)];
                const shape = shapes[Math.floor(Math.random() * shapes.length)];
                const left = Math.random() * 100;
                const animationDuration = Math.random() * 3 + 2;
                const delay = Math.random() * 2;
                
                // Apply styles
                confetti.style.width = `${size}px`;
                confetti.style.height = `${size}px`;
                confetti.style.background = color;
                confetti.style.left = `${left}%`;
                confetti.style.animationDuration = `${animationDuration}s`;
                confetti.style.animationDelay = `${delay}s`;
                
                // Shape specific styles
                if (shape === 'square') {
                    confetti.style.borderRadius = '3px';
                } else if (shape === 'triangle') {
                    confetti.style.width = '0';
                    confetti.style.height = '0';
                    confetti.style.borderLeft = `${size/2}px solid transparent`;
                    confetti.style.borderRight = `${size/2}px solid transparent`;
                    confetti.style.borderBottom = `${size}px solid ${color}`;
                    confetti.style.background = 'none';
                }
                
                celebration.appendChild(confetti);
            }
            
            setTimeout(() => {
                celebration.style.display = 'none';
            }, 3000);
        }
    </script>
</body>
</html>
